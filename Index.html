<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Activité Numéro 5 - JavaScript</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 30px; background: #f4f4f9; }
    h2 { color: #2c3e50; border-bottom: 2px solid #ccc; padding-bottom: 5px; }
    section { background: #fff; padding: 20px; margin-bottom: 30px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    input, button { padding: 8px; margin: 5px 0; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #3498db; color: white; cursor: pointer; }
    button:hover { background: #2980b9; }
    p.result { background: #ecf0f1; padding: 8px; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>Activité Pratique - Objets JavaScript</h1>

  <!-- Exercice 1 -->
  <section>
    <h2>Exercice 1 : Manipulation de chaînes</h2>
    <input type="text" id="chaine" placeholder="Saisir une chaîne" oninput="afficherInfosChaine()">
    <p id="longueur" class="result"></p>
    <p id="souschaine" class="result"></p>
  </section>

  <!-- Exercice 2 -->
  <section>
    <h2>Exercice 2 : Manipulation de nombres</h2>
    <input type="number" id="nombre" placeholder="Entrez un nombre" oninput="calculerNombre()">
    <p id="racine" class="result"></p>
    <p id="arrondi" class="result"></p>
    <button onclick="genererAleatoire()">Nombre aléatoire (1-100)</button>
    <button onclick="genererAleatoire2()">Nombre aléatoire (min-max)</button><br>
    <input type="number" id="min" placeholder="Min">
    <input type="number" id="max" placeholder="Max">
    <p id="alea" class="result"></p>
  </section>

  <!-- Exercice 3 -->
  <section>
    <h2>Exercice 3 : Manipulation de dates</h2>
    <input type="date" id="dateSaisie" onchange="afficherDate()">
    <p id="jour" class="result"></p>
    <p id="mois" class="result"></p>
    <p id="annee" class="result"></p>
    <p id="diff" class="result"></p>
  </section>

  <!-- Exercice 4 -->
  <section>
    <h2>Exercice 4 : Horloge en temps réel</h2>
    <input type="text" id="horloge" readonly>
  </section>

  <!-- Exercice 5 -->
  <section>
    <h2>Exercice 5 : Manipulation de tableaux</h2>
    <p id="tableau" class="result"></p>
    <input type="number" id="nouvelElement" placeholder="Ajouter un nombre">
    <button onclick="ajouterElement()">Ajouter</button>
    <input type="number" id="supprimerElement" placeholder="Supprimer ce nombre">
    <button onclick="supprimerElement()">Supprimer</button>
    <button onclick="trierTableau()">Trier</button>
  </section>

  <!-- Exercice 6 -->
  <section>
    <h2>Exercice 6 : Calculateur de prêt hypothécaire</h2>
    <input type="number" id="montant" placeholder="Montant du prêt">
    <input type="number" id="taux" placeholder="Taux d'intérêt annuel (%)">
    <input type="number" id="annees" placeholder="Durée (années)">
    <button onclick="calculerPret()">Calculer</button>
    <p id="paiement" class="result"></p>
  </section>

  <script>
    // Exercice 1
    function afficherInfosChaine() {
      let texte = document.getElementById('chaine').value;
      document.getElementById('longueur').textContent = 'Longueur : ' + texte.length;
      document.getElementById('souschaine').textContent = '3 premiers caractères : ' + texte.substring(0,3);
    }

    // Exercice 2
    function calculerNombre() {
      let n = parseFloat(document.getElementById('nombre').value);
      if (isNaN(n)) return;
      document.getElementById('racine').textContent = 'Racine carrée : ' + Math.sqrt(n).toFixed(2);
      document.getElementById('arrondi').textContent = 'Arrondi : ' + Math.round(n);
    }

    function Aleatoire() { return Math.floor(Math.random() * 100) + 1; }
    function genererAleatoire() {
      document.getElementById('alea').textContent = 'Nombre aléatoire (1-100): ' + Aleatoire();
    }

    function Aleatoire2(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function genererAleatoire2() {
      let min = parseInt(document.getElementById('min').value);
      let max = parseInt(document.getElementById('max').value);
      if (isNaN(min) || isNaN(max) || min >= max) {
        alert('Veuillez entrer des valeurs min et max valides');
        return;
      }
      document.getElementById('alea').textContent = 'Nombre aléatoire ('+min+'-'+max+'): ' + Aleatoire2(min, max);
    }

    // Exercice 3
    function afficherDate() {
      let dateStr = document.getElementById('dateSaisie').value;
      if (!dateStr) return;
      let date = new Date(dateStr);
      document.getElementById('jour').textContent = 'Jour : ' + date.getDate();
      document.getElementById('mois').textContent = 'Mois : ' + (date.getMonth() + 1);
      document.getElementById('annee').textContent = 'Année : ' + date.getFullYear();
      let diff = Math.floor((new Date() - date) / (1000 * 60 * 60 * 24));
      document.getElementById('diff').textContent = 'Différence avec aujourd\'hui : ' + diff + ' jours';
    }

    // Exercice 4
    function afficherHeure() {
      let now = new Date();
      let h = String(now.getHours()).padStart(2,'0');
      let m = String(now.getMinutes()).padStart(2,'0');
      let s = String(now.getSeconds()).padStart(2,'0');
      document.getElementById('horloge').value = `${h}:${m}:${s}`;
      setTimeout(afficherHeure, 1000);
    }
    afficherHeure();

    // Exercice 5
    let tab = [3, 8, 1, 5];
    document.getElementById('tableau').textContent = 'Tableau initial : ' + tab.join(', ');

    function ajouterElement() {
      let val = parseInt(document.getElementById('nouvelElement').value);
      if (!isNaN(val)) tab.push(val);
      document.getElementById('tableau').textContent = 'Tableau : ' + tab.join(', ');
    }

    function supprimerElement() {
      let val = parseInt(document.getElementById('supprimerElement').value);
      tab = tab.filter(x => x !== val);
      document.getElementById('tableau').textContent = 'Tableau : ' + tab.join(', ');
    }

    function trierTableau() {
      tab.sort((a,b) => a - b);
      document.getElementById('tableau').textContent = 'Tableau trié : ' + tab.join(', ');
    }

    // Exercice 6
    function calculerPret() {
      let P = parseFloat(document.getElementById('montant').value);
      let t = parseFloat(document.getElementById('taux').value);
      let n = parseInt(document.getElementById('annees').value);

      if (isNaN(P) || P <= 0 || isNaN(t) || t <= 0 || isNaN(n) || n <= 0) {
        alert('Veuillez entrer des valeurs valides');
        return;
      }
      let r = t / 100 / 12;
      let nbMois = n * 12;
      let M = P * (r * Math.pow(1 + r, nbMois)) / (Math.pow(1 + r, nbMois) - 1);
      document.getElementById('paiement').textContent = 'Paiement mensuel : ' + M.toFixed(2) + ' €';
    }
  </script>
</body>
</html>